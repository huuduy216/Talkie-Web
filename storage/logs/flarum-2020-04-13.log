[2020-04-13 10:51:23] production.ERROR: PDOException: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`tal91714_db`.`tags`, CONSTRAINT `tags_last_posted_discussion_id_foreign` FOREIGN KEY (`last_posted_discussion_id`) REFERENCES `discussions` (`id`) ON DELETE SET NULL) in /var/www/vhosts/talkie.vn/httpdocs/vendor/doctrine/dbal/lib/Doctrine/DBAL/Driver/PDOStatement.php:117
Stack trace:
#0 /var/www/vhosts/talkie.vn/httpdocs/vendor/doctrine/dbal/lib/Doctrine/DBAL/Driver/PDOStatement.php(117): PDOStatement->execute(NULL)
#1 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(483): Doctrine\DBAL\Driver\PDOStatement->execute()
#2 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(657): Illuminate\Database\Connection->Illuminate\Database\{closure}('update `tags` s...', Array)
#3 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(624): Illuminate\Database\Connection->runQueryCallback('update `tags` s...', Array, Object(Closure))
#4 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(490): Illuminate\Database\Connection->run('update `tags` s...', Array, Object(Closure))
#5 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(423): Illuminate\Database\Connection->affectingStatement('update `tags` s...', Array)
#6 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Query/Builder.php(2659): Illuminate\Database\Connection->update('update `tags` s...', Array)
#7 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Builder.php(818): Illuminate\Database\Query\Builder->update(Array)
#8 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Model.php(729): Illuminate\Database\Eloquent\Builder->update(Array)
#9 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Model.php(644): Illuminate\Database\Eloquent\Model->performUpdate(Object(Illuminate\Database\Eloquent\Builder))
#10 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/tags/src/Listener/UpdateTagMetadata.php(129): Illuminate\Database\Eloquent\Model->save()
#11 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/tags/src/Listener/UpdateTagMetadata.php(63): Flarum\Tags\Listener\UpdateTagMetadata->updateTags(Object(Flarum\Discussion\Discussion), -1)
#12 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/events/Dispatcher.php(360): Flarum\Tags\Listener\UpdateTagMetadata->whenDiscussionIsDeleted(Object(Flarum\Discussion\Event\Deleted))
#13 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/events/Dispatcher.php(209): Illuminate\Events\Dispatcher->Illuminate\Events\{closure}('Flarum\\Discussi...', Array)
#14 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Foundation/DispatchEventsTrait.php(33): Illuminate\Events\Dispatcher->dispatch('Flarum\\Discussi...')
#15 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Discussion/Command/DeleteDiscussionHandler.php(58): Flarum\Discussion\Command\DeleteDiscussionHandler->dispatchEventsFor(Object(Flarum\Discussion\Discussion), Object(Flarum\User\User))
#16 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(90): Flarum\Discussion\Command\DeleteDiscussionHandler->handle(Object(Flarum\Discussion\Command\DeleteDiscussion))
#17 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/pipeline/Pipeline.php(128): Illuminate\Bus\Dispatcher->Illuminate\Bus\{closure}(Object(Flarum\Discussion\Command\DeleteDiscussion))
#18 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/pipeline/Pipeline.php(104): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Flarum\Discussion\Command\DeleteDiscussion))
#19 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(98): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#20 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(76): Illuminate\Bus\Dispatcher->dispatchNow(Object(Flarum\Discussion\Command\DeleteDiscussion))
#21 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Controller/DeleteDiscussionController.php(42): Illuminate\Bus\Dispatcher->dispatch(Object(Flarum\Discussion\Command\DeleteDiscussion))
#22 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Controller/AbstractDeleteController.php(24): Flarum\Api\Controller\DeleteDiscussionController->delete(Object(Laminas\Diactoros\ServerRequest))
#23 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/RouteHandlerFactory.php(38): Flarum\Api\Controller\AbstractDeleteController->handle(Object(Laminas\Diactoros\ServerRequest))
#24 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/DispatchRoute.php(65): Flarum\Http\RouteHandlerFactory->Flarum\Http\{closure}(Object(Laminas\Diactoros\ServerRequest), Array)
#25 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\DispatchRoute->process(Object(Laminas\Diactoros\ServerRequest), Object(Closure))
#26 /var/www/vhosts/talkie.vn/httpdocs/vendor/fof/secure-https/src/Middlewares/ContentSecurityPolicyMiddleware.php(21): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#27 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): FoF\SecureHttps\Middlewares\ContentSecurityPolicyMiddleware->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#28 /var/www/vhosts/talkie.vn/httpdocs/vendor/fof/stopforumspam/src/Middleware/RegisterMiddleware.php(94): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#29 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): FoF\StopForumSpam\Middleware\RegisterMiddleware->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#30 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/SetLocale.php(50): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#31 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\SetLocale->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#32 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/CheckCsrfToken.php(31): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#33 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\CheckCsrfToken->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#34 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/AuthenticateWithHeader.php(55): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#35 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\AuthenticateWithHeader->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#36 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/AuthenticateWithSession.php(32): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#37 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\AuthenticateWithSession->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#38 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/RememberFromCookie.php(51): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#39 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\RememberFromCookie->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#40 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/StartSession.php(61): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#41 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\StartSession->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#42 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Middleware/FakeHttpMethods.php(29): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#43 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Api\Middleware\FakeHttpMethods->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#44 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/ParseJsonBody.php(28): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#45 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\ParseJsonBody->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#46 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/HandleErrors.php(57): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#47 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\HandleErrors->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#48 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(84): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#49 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/request-handler/src/RequestHandler.php(84): Laminas\Stratigility\MiddlewarePipe->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#50 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\RequestHandler->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#51 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/base-path-router/src/BasePathRouter.php(97): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#52 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\BasePathRouter->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#53 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Middleware/OriginalMessages.php(42): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#54 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Laminas\Stratigility\Middleware\OriginalMessages->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#55 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/base-path/src/BasePath.php(53): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#56 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\BasePath->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#57 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(84): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#58 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(73): Laminas\Stratigility\MiddlewarePipe->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\EmptyPipelineHandler))
#59 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-httphandlerrunner/src/RequestHandlerRunner.php(96): Laminas\Stratigility\MiddlewarePipe->handle(Object(Laminas\Diactoros\ServerRequest))
#60 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Server.php(42): Laminas\HttpHandlerRunner\RequestHandlerRunner->run()
#61 /var/www/vhosts/talkie.vn/httpdocs/public/index.php(26): Flarum\Http\Server->listen()
#62 {main}

Next Doctrine\DBAL\Driver\PDOException: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`tal91714_db`.`tags`, CONSTRAINT `tags_last_posted_discussion_id_foreign` FOREIGN KEY (`last_posted_discussion_id`) REFERENCES `discussions` (`id`) ON DELETE SET NULL) in /var/www/vhosts/talkie.vn/httpdocs/vendor/doctrine/dbal/lib/Doctrine/DBAL/Driver/PDOStatement.php:119
Stack trace:
#0 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(483): Doctrine\DBAL\Driver\PDOStatement->execute()
#1 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(657): Illuminate\Database\Connection->Illuminate\Database\{closure}('update `tags` s...', Array)
#2 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(624): Illuminate\Database\Connection->runQueryCallback('update `tags` s...', Array, Object(Closure))
#3 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(490): Illuminate\Database\Connection->run('update `tags` s...', Array, Object(Closure))
#4 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(423): Illuminate\Database\Connection->affectingStatement('update `tags` s...', Array)
#5 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Query/Builder.php(2659): Illuminate\Database\Connection->update('update `tags` s...', Array)
#6 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Builder.php(818): Illuminate\Database\Query\Builder->update(Array)
#7 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Model.php(729): Illuminate\Database\Eloquent\Builder->update(Array)
#8 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Model.php(644): Illuminate\Database\Eloquent\Model->performUpdate(Object(Illuminate\Database\Eloquent\Builder))
#9 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/tags/src/Listener/UpdateTagMetadata.php(129): Illuminate\Database\Eloquent\Model->save()
#10 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/tags/src/Listener/UpdateTagMetadata.php(63): Flarum\Tags\Listener\UpdateTagMetadata->updateTags(Object(Flarum\Discussion\Discussion), -1)
#11 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/events/Dispatcher.php(360): Flarum\Tags\Listener\UpdateTagMetadata->whenDiscussionIsDeleted(Object(Flarum\Discussion\Event\Deleted))
#12 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/events/Dispatcher.php(209): Illuminate\Events\Dispatcher->Illuminate\Events\{closure}('Flarum\\Discussi...', Array)
#13 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Foundation/DispatchEventsTrait.php(33): Illuminate\Events\Dispatcher->dispatch('Flarum\\Discussi...')
#14 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Discussion/Command/DeleteDiscussionHandler.php(58): Flarum\Discussion\Command\DeleteDiscussionHandler->dispatchEventsFor(Object(Flarum\Discussion\Discussion), Object(Flarum\User\User))
#15 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(90): Flarum\Discussion\Command\DeleteDiscussionHandler->handle(Object(Flarum\Discussion\Command\DeleteDiscussion))
#16 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/pipeline/Pipeline.php(128): Illuminate\Bus\Dispatcher->Illuminate\Bus\{closure}(Object(Flarum\Discussion\Command\DeleteDiscussion))
#17 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/pipeline/Pipeline.php(104): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Flarum\Discussion\Command\DeleteDiscussion))
#18 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(98): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#19 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(76): Illuminate\Bus\Dispatcher->dispatchNow(Object(Flarum\Discussion\Command\DeleteDiscussion))
#20 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Controller/DeleteDiscussionController.php(42): Illuminate\Bus\Dispatcher->dispatch(Object(Flarum\Discussion\Command\DeleteDiscussion))
#21 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Controller/AbstractDeleteController.php(24): Flarum\Api\Controller\DeleteDiscussionController->delete(Object(Laminas\Diactoros\ServerRequest))
#22 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/RouteHandlerFactory.php(38): Flarum\Api\Controller\AbstractDeleteController->handle(Object(Laminas\Diactoros\ServerRequest))
#23 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/DispatchRoute.php(65): Flarum\Http\RouteHandlerFactory->Flarum\Http\{closure}(Object(Laminas\Diactoros\ServerRequest), Array)
#24 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\DispatchRoute->process(Object(Laminas\Diactoros\ServerRequest), Object(Closure))
#25 /var/www/vhosts/talkie.vn/httpdocs/vendor/fof/secure-https/src/Middlewares/ContentSecurityPolicyMiddleware.php(21): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#26 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): FoF\SecureHttps\Middlewares\ContentSecurityPolicyMiddleware->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#27 /var/www/vhosts/talkie.vn/httpdocs/vendor/fof/stopforumspam/src/Middleware/RegisterMiddleware.php(94): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#28 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): FoF\StopForumSpam\Middleware\RegisterMiddleware->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#29 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/SetLocale.php(50): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#30 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\SetLocale->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#31 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/CheckCsrfToken.php(31): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#32 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\CheckCsrfToken->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#33 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/AuthenticateWithHeader.php(55): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#34 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\AuthenticateWithHeader->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#35 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/AuthenticateWithSession.php(32): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#36 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\AuthenticateWithSession->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#37 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/RememberFromCookie.php(51): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#38 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\RememberFromCookie->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#39 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/StartSession.php(61): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#40 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\StartSession->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#41 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Middleware/FakeHttpMethods.php(29): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#42 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Api\Middleware\FakeHttpMethods->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#43 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/ParseJsonBody.php(28): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#44 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\ParseJsonBody->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#45 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/HandleErrors.php(57): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#46 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\HandleErrors->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#47 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(84): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#48 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/request-handler/src/RequestHandler.php(84): Laminas\Stratigility\MiddlewarePipe->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#49 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\RequestHandler->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#50 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/base-path-router/src/BasePathRouter.php(97): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#51 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\BasePathRouter->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#52 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Middleware/OriginalMessages.php(42): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#53 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Laminas\Stratigility\Middleware\OriginalMessages->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#54 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/base-path/src/BasePath.php(53): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#55 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\BasePath->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#56 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(84): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#57 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(73): Laminas\Stratigility\MiddlewarePipe->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\EmptyPipelineHandler))
#58 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-httphandlerrunner/src/RequestHandlerRunner.php(96): Laminas\Stratigility\MiddlewarePipe->handle(Object(Laminas\Diactoros\ServerRequest))
#59 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Server.php(42): Laminas\HttpHandlerRunner\RequestHandlerRunner->run()
#60 /var/www/vhosts/talkie.vn/httpdocs/public/index.php(26): Flarum\Http\Server->listen()
#61 {main}

Next Illuminate\Database\QueryException: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`tal91714_db`.`tags`, CONSTRAINT `tags_last_posted_discussion_id_foreign` FOREIGN KEY (`last_posted_discussion_id`) REFERENCES `discussions` (`id`) ON DELETE SET NULL) (SQL: update `tags` set `discussion_count` = 1, `last_posted_at` = 2020-03-22 04:00:19, `last_posted_discussion_id` = 5 where `id` = 1) in /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php:664
Stack trace:
#0 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(624): Illuminate\Database\Connection->runQueryCallback('update `tags` s...', Array, Object(Closure))
#1 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(490): Illuminate\Database\Connection->run('update `tags` s...', Array, Object(Closure))
#2 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Connection.php(423): Illuminate\Database\Connection->affectingStatement('update `tags` s...', Array)
#3 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Query/Builder.php(2659): Illuminate\Database\Connection->update('update `tags` s...', Array)
#4 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Builder.php(818): Illuminate\Database\Query\Builder->update(Array)
#5 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Model.php(729): Illuminate\Database\Eloquent\Builder->update(Array)
#6 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/database/Eloquent/Model.php(644): Illuminate\Database\Eloquent\Model->performUpdate(Object(Illuminate\Database\Eloquent\Builder))
#7 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/tags/src/Listener/UpdateTagMetadata.php(129): Illuminate\Database\Eloquent\Model->save()
#8 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/tags/src/Listener/UpdateTagMetadata.php(63): Flarum\Tags\Listener\UpdateTagMetadata->updateTags(Object(Flarum\Discussion\Discussion), -1)
#9 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/events/Dispatcher.php(360): Flarum\Tags\Listener\UpdateTagMetadata->whenDiscussionIsDeleted(Object(Flarum\Discussion\Event\Deleted))
#10 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/events/Dispatcher.php(209): Illuminate\Events\Dispatcher->Illuminate\Events\{closure}('Flarum\\Discussi...', Array)
#11 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Foundation/DispatchEventsTrait.php(33): Illuminate\Events\Dispatcher->dispatch('Flarum\\Discussi...')
#12 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Discussion/Command/DeleteDiscussionHandler.php(58): Flarum\Discussion\Command\DeleteDiscussionHandler->dispatchEventsFor(Object(Flarum\Discussion\Discussion), Object(Flarum\User\User))
#13 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(90): Flarum\Discussion\Command\DeleteDiscussionHandler->handle(Object(Flarum\Discussion\Command\DeleteDiscussion))
#14 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/pipeline/Pipeline.php(128): Illuminate\Bus\Dispatcher->Illuminate\Bus\{closure}(Object(Flarum\Discussion\Command\DeleteDiscussion))
#15 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/pipeline/Pipeline.php(104): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Flarum\Discussion\Command\DeleteDiscussion))
#16 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(98): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#17 /var/www/vhosts/talkie.vn/httpdocs/vendor/illuminate/bus/Dispatcher.php(76): Illuminate\Bus\Dispatcher->dispatchNow(Object(Flarum\Discussion\Command\DeleteDiscussion))
#18 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Controller/DeleteDiscussionController.php(42): Illuminate\Bus\Dispatcher->dispatch(Object(Flarum\Discussion\Command\DeleteDiscussion))
#19 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Controller/AbstractDeleteController.php(24): Flarum\Api\Controller\DeleteDiscussionController->delete(Object(Laminas\Diactoros\ServerRequest))
#20 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/RouteHandlerFactory.php(38): Flarum\Api\Controller\AbstractDeleteController->handle(Object(Laminas\Diactoros\ServerRequest))
#21 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/DispatchRoute.php(65): Flarum\Http\RouteHandlerFactory->Flarum\Http\{closure}(Object(Laminas\Diactoros\ServerRequest), Array)
#22 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\DispatchRoute->process(Object(Laminas\Diactoros\ServerRequest), Object(Closure))
#23 /var/www/vhosts/talkie.vn/httpdocs/vendor/fof/secure-https/src/Middlewares/ContentSecurityPolicyMiddleware.php(21): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#24 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): FoF\SecureHttps\Middlewares\ContentSecurityPolicyMiddleware->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#25 /var/www/vhosts/talkie.vn/httpdocs/vendor/fof/stopforumspam/src/Middleware/RegisterMiddleware.php(94): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#26 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): FoF\StopForumSpam\Middleware\RegisterMiddleware->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#27 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/SetLocale.php(50): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#28 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\SetLocale->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#29 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/CheckCsrfToken.php(31): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#30 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\CheckCsrfToken->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#31 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/AuthenticateWithHeader.php(55): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#32 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\AuthenticateWithHeader->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#33 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/AuthenticateWithSession.php(32): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#34 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\AuthenticateWithSession->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#35 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/RememberFromCookie.php(51): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#36 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\RememberFromCookie->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#37 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/StartSession.php(61): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#38 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\StartSession->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#39 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Api/Middleware/FakeHttpMethods.php(29): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#40 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Api\Middleware\FakeHttpMethods->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#41 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/ParseJsonBody.php(28): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#42 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\ParseJsonBody->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#43 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Middleware/HandleErrors.php(57): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#44 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Flarum\Http\Middleware\HandleErrors->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#45 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(84): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#46 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/request-handler/src/RequestHandler.php(84): Laminas\Stratigility\MiddlewarePipe->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#47 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\RequestHandler->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#48 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/base-path-router/src/BasePathRouter.php(97): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#49 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\BasePathRouter->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#50 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Middleware/OriginalMessages.php(42): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#51 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Laminas\Stratigility\Middleware\OriginalMessages->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#52 /var/www/vhosts/talkie.vn/httpdocs/vendor/middlewares/base-path/src/BasePath.php(53): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#53 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/Next.php(61): Middlewares\BasePath->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\Next))
#54 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(84): Laminas\Stratigility\Next->handle(Object(Laminas\Diactoros\ServerRequest))
#55 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-stratigility/src/MiddlewarePipe.php(73): Laminas\Stratigility\MiddlewarePipe->process(Object(Laminas\Diactoros\ServerRequest), Object(Laminas\Stratigility\EmptyPipelineHandler))
#56 /var/www/vhosts/talkie.vn/httpdocs/vendor/laminas/laminas-httphandlerrunner/src/RequestHandlerRunner.php(96): Laminas\Stratigility\MiddlewarePipe->handle(Object(Laminas\Diactoros\ServerRequest))
#57 /var/www/vhosts/talkie.vn/httpdocs/vendor/flarum/core/src/Http/Server.php(42): Laminas\HttpHandlerRunner\RequestHandlerRunner->run()
#58 /var/www/vhosts/talkie.vn/httpdocs/public/index.php(26): Flarum\Http\Server->listen()
#59 {main}  
